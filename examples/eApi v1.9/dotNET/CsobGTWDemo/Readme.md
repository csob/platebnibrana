Requirements:

- installed DotNet 6.x.x

1. Download and unzip or clone git repository for CSOB payment gateway
   (https://github.com/csob/paymentgateway)

2. Configure

    1. configure **Common.Constants**
       a. setup url of CSOB payment gateway for given environment, i.e. for integration environment set to value
       > public const string GatewayUrl = "https://iapi.iplatebnibrana.csob.cz/api/v1.9";

       b. setup path to public key of CSOB payment gateway, e.g.
       > public const string MipsPublicKey = "./config/mips_iplatebnibrana.csob.cz.pub";

       c. setup merchant ID (assigned by CSOB), e.g.
       > public const string MerchantId = "M1MIPSXXXX";

       d. setup path to merchant private key (key generated by https://iplatebnibrana.csob.cz/keygen tool), e.g.
       > public const string MerchantKeyFileName = "./config/M1MIPSXXXX.key";
3. Compile
   > dotnet build
4. Try the examples

   #### echo via POST method

   > CsobGatewayClientExample.exe -m ECHO_POST

   #### echo via GET method

   > CsobGatewayClientExample.exe -m ECHO_GET

   #### payment init (standard payment)

   > CsobGatewayClientExample.exe -m PAYMENT_INIT -i config\payment-init-base.json

   #### payment init (oneclick template)

   > CsobGatewayClientExample.exe -m PAYMENT_INIT -i config\payment-init-oneclick-base.json

   #### payment init (custom payment)

   > CsobGatewayClientExample.exe -m PAYMENT_INIT -i config\payment-init-custom-base.json

   #### payment process

   > CsobGatewayClientExample.exe -m PAYMENT_PROCESS -p <pay-id-from-previous-payment-init-call>

   #### payment status

   > CsobGatewayClientExample.exe -m PAYMENT_STATUS -p <pay-id-from-previous-payment-init-call>

   #### payment close

   > CsobGatewayClientExample.exe -m PAYMENT_CLOSE -p <pay-id-from-previous-payment-init-call>

   or for close to lower amount use -a param to specify totalAmount for payment/close:

   > CsobGatewayClientExample.exe -m PAYMENT_CLOSE -p <pay-id-from-previous-payment-init-call> -a 1000

   #### payment reverse

   > CsobGatewayClientExample.exe -m PAYMENT_REVERSE -p <pay-id-from-previous-payment-init-call>

   #### payment refund

   > CsobGatewayClientExample.exe -m PAYMENT_REFUND -p <pay-id-from-previous-payment-init-call>

   or for partial refund use -a param to specify amount for partial refund:

   > CsobGatewayClientExample.exe -m PAYMENT_REFUND -p <pay-id-from-previous-payment-init-call> -a 1000

   #### oneclick echo

   > CsobGatewayClientExample.exe -m ONECLICK_ECHO -x <orig-pay-id>

   #### oneclick init

   > CsobGatewayClientExample.exe -m ONECLICK_INIT -i config\oneclick-init-base.json

   #### oneclick process

   > CsobGatewayClientExample.exe -m  ONECLICK_PROCESS -p <pay-id-from-previous-oneclick-init-call>

   #### echo customer

   > CsobGatewayClientExample.exe -m ECHO_CUSTOMER -c <customer-id>

   #### applepay echo

   > CsobGatewayClientExample.exe -m APPLEPAY_ECHO

   #### applepay init

   > CsobGatewayClientExample.exe -m APPLEPAY_INIT -i config\applepay-init-base.json -t <base64 encoded payload>

   #### applepay process

   > CsobGatewayClientExample.exe -m  APPLEPAY_PROCESS -p <pay-id-from-previous-applepay-init-call>

   #### googlepay echo

   > CsobGatewayClientExample.exe -m GOOGLEPAY_ECHO

   #### googlepay init

   > CsobGatewayClientExample.exe -m GOOGLEPAY_INIT -i .\config\googlepay-init-base.json -t  <base64 encoded payload>

   #### googlepay process

   > CsobGatewayClientExample.exe -m GOOGLEPAY_PROCESS -p <pay-id-from-previous-googlepay-init-call>

   #### button init

   > CsobGatewayClientExample.exe -m BUTTON_INIT -i .\config\button-init-base.json

   #### mallpay init

   > CsobGatewayClientExample.exe -m MALLPAY_INIT -i .\config\mallpay-init-base.json

   #### mallpay logistics

   > CsobGatewayClientExample.exe -m MALLPAY_LOGISTICS -i .\config\mallpay-logistics-base.json -p <pay-id-from-previous-mallpay-init-call>

   #### mallpay cancel

   > CsobGatewayClientExample.exe -m MALLPAY_CANCEL -p <pay-id-from-previous-mallpay-init-call> -r <reason>

   available options for a <reason> are: aborted | other_payment | undeliverable | unavailable | abandoned | changed |
   unprocessed

   #### mallpay refund

   > CsobGatewayClientExample.exe -m MALLPAY_REFUND -i .\config\mallpay-refund-base.json -p  <pay-id-from-previous-mallpay-init-call>

   #### loan init

   > CsobGatewayClientExample.exe -m LOAN_INIT -i .\config\loan-init-base.json

   -with amount override:

   > CsobGatewayClientExample.exe -m LOAN_INIT -i .\config\loan-init-base.json -a 2000001

   -with amount and purchaseId override:

   > CsobGatewayClientExample.exe -m LOAN_INIT -i .\config\loan-init-base.json -a 2000001 -p ZA0019S51966-2

   #### loan logistics

   > CsobGatewayClientExample.exe -m LOAN_LOGISTICS -p <pay-id-from-previous-loan-init-call>  -e <event>

   available options for event are delivered | picked_up | dispatched | ready_for_pickup

   #### loan cancel

   > CsobGatewayClientExample.exe -m LOAN_CANCEL -p <pay-id-from-previous-loan-init-call> -r <reason>

   available options for reason are: aborted | other_payment | undeliverable | unavailable | abandoned | changed |
   unprocessed

   #### loan refund

   > CsobGatewayClientExample.exe -m LOAN_REFUND -p <pay-id-from-previous-loan-init-call> -i .\config\loan-refund-base.json   